<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Overview package forrescalc • forrescalc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Overview package forrescalc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">forrescalc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../news/index.html">NEWS</a>
</li>
<li>
  <a href="../articles/index.html">Tutorials</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../CONTRIBUTING.html">Contributing</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/inbo/forrescalc" class="external-link">
    <span class="fa fa-github"></span>

  </a>
</li>
<li>
  <a href="https://twitter.com/INBOVlaanderen" class="external-link">
    <span class="fa fa-twitter"></span>

  </a>
</li>
<li>
  <a href="https://www.facebook.com/pg/INBOVlaanderen" class="external-link">
    <span class="fa fa-facebook"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Overview package forrescalc</h1>
            
            <h4 data-toc-skip class="date">2024-09-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/inbo/forrescalc/blob/main/vignettes/overview_forrescalc.Rmd" class="external-link"><code>vignettes/overview_forrescalc.Rmd</code></a></small>
      <div class="hidden name"><code>overview_forrescalc.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The package <code>forrescalc</code> is developed to analyse tree
measure data from Vandekerkhove et al. (2021) that are saved in a
<code>Fieldmap</code> database. The package contains functions to
aggregate the data to different levels. As the dataset is rather large
and these calculations take a lot of time, the package also contains
functions to save results in a git repository and retrieve them
afterwards for further analysis or visualisation of results. Primary
results of the aggregations are saved in the <a href="https://github.com/inbo/forresdat" class="external-link">git repository
<code>forresdat</code></a>, which is meant to be data source for
aggregated data on forests. Calculations are done by using ID codes, and
lookup tables for these codes are saved as separate tables in
<code>forresdat</code>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>To install <code>forrescalc</code> from the <a href="https://inbo.r-universe.dev/builds" class="external-link">INBO universe</a>, start a new
R session and run this code (before loading any packages):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Enable the INBO universe</span></span>
<span><span class="co"># (not needed for INBO employees, as this is the default setting)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>  repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    inbo <span class="op">=</span> <span class="st">"https://inbo.r-universe.dev"</span>, CRAN <span class="op">=</span> <span class="st">"https://cloud.r-project.org"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Install the package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"forrescalc"</span><span class="op">)</span></span></code></pre></div>
<p>To install <code>forrescalc</code> from GitHub, start a new R session
and run this code (before loading any packages):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"inbo/forrescalc"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Some functions require local access to the GitHub repository <a href="https://github.com/inbo/forresdat" class="external-link"><code>forresdat</code></a>.</p>
</div>
<div class="section level2">
<h2 id="recommended-use-of-the-package">Recommended use of the package<a class="anchor" aria-label="anchor" href="#recommended-use-of-the-package"></a>
</h2>
<p>The package <code>forrescalc</code> can be used for different
reasons:</p>
<ul>
<li>keep the data repository <code>forresdat</code> up-to-date</li>
<li>load data from the <code>Fieldmap</code> database or
<code>forresdat</code> to do visualisations or analyses</li>
<li>do similar aggregations on your own data</li>
<li>validate data from the <code>Fieldmap</code> database</li>
<li>…</li>
</ul>
<p>The next part shortly describes some common tasks and mentions the
functions that are useful for these tasks. For detailed information on
the use of specific functions (including an example), we refer to <a href="https://inbo.github.io/forrescalc/reference/index.html" class="external-link">the help
of the function</a> (accessible in R by typing the function name
preceded by a <code>?</code>, for instance
<code><a href="../reference/load_data_dendrometry.html">?load_data_dendrometry</a></code>). Updating <code>forresdat</code>
should be done following a strict routine, for other tasks it is up to
the user to cherry-pick the desired functions.</p>
<div class="section level3">
<h3 id="load-data-from-fieldmap-database">Load data from <code>Fieldmap</code> database<a class="anchor" aria-label="anchor" href="#load-data-from-fieldmap-database"></a>
</h3>
<p>With the calculations for <code>forresdat</code> in mind, we
developed some functions to load specific data from the
<code>Fieldmap</code> database: <code><a href="../reference/load_plotinfo.html">load_plotinfo()</a></code>,
<code><a href="../reference/load_data_dendrometry.html">load_data_dendrometry()</a></code>, <code><a href="../reference/load_data_shoots.html">load_data_shoots()</a></code>,
<code><a href="../reference/load_data_deadwood.html">load_data_deadwood()</a></code>,
<code><a href="../reference/load_data_regeneration.html">load_data_regeneration()</a></code>,
<code><a href="../reference/load_data_vegetation.html">load_data_vegetation()</a></code> and
<code><a href="../reference/load_data_herblayer.html">load_data_herblayer()</a></code>. After retrieving data from the
database, they might calculate some additional variables that are needed
for further analysis (e.g. they calculate <code>year</code> starting
from the observation date). The output of these functions is ready to be
used in the calculation functions.</p>
<p>To be able to calculate tree volumes starting from tree and shoot
data, height models are available from git repository <a href="https://github.com/inbo/forresheights" class="external-link"><code>forresheights</code></a>
using function <code><a href="../reference/load_height_models.html">load_height_models()</a></code>.</p>
<p>To validate the <code>Fieldmap</code> database, package
<code>forrescalc</code> also contains ‘check’-functions for different
tables of the database, and an umbrella function
<code><a href="../reference/check_data_fmdb.html">check_data_fmdb()</a></code> that runs all these functions and lists
all missing data and wrong input.</p>
</div>
<div class="section level3">
<h3 id="calculations-aggregations">Calculations (aggregations)<a class="anchor" aria-label="anchor" href="#calculations-aggregations"></a>
</h3>
<div class="section level4">
<h4 id="umbrella-functions">Umbrella functions<a class="anchor" aria-label="anchor" href="#umbrella-functions"></a>
</h4>
<p>The calculations, which are in fact aggregations of very detailed
data on tree level to plot or plot-species level, are grouped in 3
umbrella functions:</p>
<ul>
<li><code><a href="../reference/calculate_dendrometry.html">calculate_dendrometry()</a></code></li>
<li><code><a href="../reference/calculate_regeneration.html">calculate_regeneration()</a></code></li>
<li><code><a href="../reference/calculate_vegetation.html">calculate_vegetation()</a></code></li>
</ul>
<p>Each of these functions bundles different subfunctions for the same
dataset(s), but with a result on a different level.
<code><a href="../reference/calculate_dendrometry.html">calculate_dendrometry()</a></code> performs for instance the
subfunctions <code><a href="../reference/calc_dendro_plot.html">calc_dendro_plot()</a></code>,
<code><a href="../reference/calc_dendro_plot_species.html">calc_dendro_plot_species()</a></code>,
<code><a href="../reference/calc_deadw_decay_plot.html">calc_deadw_decay_plot()</a></code>,
<code><a href="../reference/calc_deadw_decay_plot_species.html">calc_deadw_decay_plot_species()</a></code>,
<code><a href="../reference/calc_diam_plot.html">calc_diam_plot()</a></code> and <code><a href="../reference/calc_diam_plot_species.html">calc_diam_plot_species()</a></code>
(after calculating tree volumes using functions
<code><a href="../reference/compose_stem_data.html">compose_stem_data()</a></code>,
<code><a href="../reference/calc_variables_stem_level.html">calc_variables_stem_level()</a></code>,
<code><a href="../reference/calc_variables_tree_level.html">calc_variables_tree_level()</a></code> and
<code><a href="../reference/calc_intact_deadwood.html">calc_intact_deadwood()</a></code>). The result of
<code><a href="../reference/calculate_dendrometry.html">calculate_dendrometry()</a></code> is a list of 6 dataframes, each
being the result of one of the subfunctions. To update
<code>forresdat</code>, all subfunctions have to be executed, so here it
is easier to use these bundled functions. Users that only need one
subfunction, can also use these subfunctions.</p>
</div>
<div class="section level4">
<h4 id="subfunctions">Subfunctions<a class="anchor" aria-label="anchor" href="#subfunctions"></a>
</h4>
<p>Subfunctions that aggregate data, have a name starting with the
abbreviation of the above mentioned high level functions
(<code>calc_dendro_</code>, <code>calc_regeneration_</code> or
<code>calc_vegetation_</code>) and ending with their grouping
variable(s). For instance a function that aggregates dendrometry data on
the level of plot and year is named <code><a href="../reference/calc_dendro_plot.html">calc_dendro_plot()</a></code>.
Each of these functions makes this aggregation for different variables,
for instance number of species, basal area and volume. These details are
described in the help of the specific functions
(e.g. <code><a href="../reference/calc_dendro_plot.html">?calc_dendro_plot</a></code>).</p>
<p>Subfunctions that not typically aggregate data, can have other
names:</p>
<ul>
<li>
<code><a href="../reference/create_unique_tree_id.html">create_unique_tree_id()</a></code> brings data from individual
trees over different years together</li>
<li>
<code><a href="../reference/add_zeros.html">add_zeros()</a></code>: as absence is not reported explicitly,
this function allows to add records with zero values for missing
species, missing height classes,…</li>
<li>
<code><a href="../reference/compare_periods_per_plot.html">compare_periods_per_plot()</a></code> compares parameters between
periods (years that parameters are measured)</li>
<li>
<code><a href="../reference/create_statistics.html">create_statistics()</a></code> gives summary statistics for the
specified variables on the specified level</li>
<li>
<code><a href="../reference/calc_diam_statistics_species.html">calc_diam_statistics_species()</a></code> gives the diameter
distribution on the level of forest reserve, species and year</li>
</ul>
</div>
<div class="section level4">
<h4 id="additional-functions">Additional functions<a class="anchor" aria-label="anchor" href="#additional-functions"></a>
</h4>
<p>And there are also some functions that we thought to be useful (or
user request functions) (these are not used to manipulate data for
<code>forresdat</code>):</p>
<ul>
<li>
<code><a href="../reference/make_table_wide.html">make_table_wide()</a></code> changes a dataframe from long to
wide, what you might want to do with (a part of) the results from
<code><a href="../reference/create_unique_tree_id.html">create_unique_tree_id()</a></code>
</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="save-and-retrieve-data">Save and retrieve data<a class="anchor" aria-label="anchor" href="#save-and-retrieve-data"></a>
</h3>
<p><em>NOTE: to be able to save data to <code>forresdat</code> or
another git repository, one should first clone the repository to a local
RStudio project. This can be done following the 4 steps described <a href="https://inbo.github.io/git-course/course_rstudio.html#23_clone_a_repo_to_work_locally" class="external-link">here</a>
(see also the 2 figures below the text). The https link to
<code>forresdat</code> can be copied from <a href="https://github.com/inbo/forresdat" class="external-link">its GitHub page</a>.</em></p>
<p>With the workflow for the update of <code>forresdat</code> in mind,
we developed 3 functions to save the results from the umbrella
functions: <code><a href="../reference/save_results_forresdat.html">save_results_forresdat()</a></code> (to save the tables in
<code>forresdat</code> or another git repository),
<code><a href="../reference/save_results_access.html">save_results_access()</a></code> (equivalent function to save the
tables in an Access database) and <code><a href="../reference/save_results_csv.html">save_results_csv()</a></code>
(equivalent function to save the tables as <code>.csv</code>). All three
functions save the dataframes from the list as separate tables. They use
the functionality of the <a href="https://ropensci.github.io/git2rdata/" class="external-link"><code>git2rdata</code></a>
package.</p>
<p>Tables from git can be loaded again in R with the function
<code><a href="../reference/read_forresdat_table.html">read_forresdat_table()</a></code>, and the whole ‘data package’
<code>forresdat</code> can be loaded using
<code><a href="../reference/read_forresdat.html">read_forresdat()</a></code>. The result of the latter is in the
<code>frictionless</code> data package format and it can be treated
using the <a href="https://docs.ropensci.org/frictionless/" class="external-link"><code>frictionless</code>
package</a>.</p>
<p>Two other functions allow to copy tables from an Access database to a
git repository and visa versa (<code><a href="../reference/from_access_to_forresdat.html">from_access_to_forresdat()</a></code>
and <code><a href="../reference/from_forresdat_to_access.html">from_forresdat_to_access()</a></code>). The first one allows to
add lookup tables to <code>forresdat</code> and the second one might be
useful to copy tables from <code>forresdat</code> to a personal analysis
database in Access.</p>
<p>Functions <code><a href="../reference/save_results_forresdat.html">save_results_forresdat()</a></code> and
<code><a href="../reference/from_access_to_forresdat.html">from_access_to_forresdat()</a></code> save tables in your local copy
of the git repository (grouped as 1 commit for each function, and with
adapting the <code>.json</code> file that allows it to be used as a
<code>frictionless</code> data package). Changes can be checked in the
local repository (project <code>forresdat</code>, tab <em>Git</em>,
button <em>History</em>) and <em>pushed</em> to the <em>remote</em>
repository on GitHub. If you are not satisfied with the changes, you can
remove the last commit with the function
<code><a href="../reference/remove_last_commit_forresdat.html">remove_last_commit_forresdat()</a></code>, but only BEFORE YOU PUSHED
THIS COMMIT TO THE REMOTE.</p>
</div>
<div class="section level3">
<h3 id="update-forresdat">Update <code>forresdat</code><a class="anchor" aria-label="anchor" href="#update-forresdat"></a>
</h3>
<p>To guarantee consistency, the data repository <code>forresdat</code>
should be updated using a strict routine. This routine is written in a
script called <code>main.R</code> that is in the root of the installed
package (and in the <code>inst</code> folder of the git repository of
the package <code>forrescalc</code>). In this script, paths to the
<code>Fieldmap</code> database and the git repository should be adapted
to the local situation. Evidently changes in the commits should be
checked before pushing them to the remote, as is described above.</p>
<p>When removing a table from <code>forresdat</code>, this should only
be done using function <code><a href="../reference/remove_table_forresdat.html">remove_table_forresdat()</a></code> to make
sure the <code>.json</code> file (that makes it a
<code>frictionless</code> data package) is updated correctly.</p>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Vandekerkhove K., Van de Kerckhove P., Leyman A., De Keersmaeker L.,
Lommelen E., Esprit M. and Goessens S., 2021. Monitoring programme on
strict forest reserves in Flanders (Belgium): Methods and operational
protocols: With an overview of the intensive monitoring sites. Reports
of the Research Institute for Nature and Forest 2021(28). Research
Institute for Nature and Forest, Brussels. <a href="https://doi.org/10.21436/inbor.38677490" class="external-link uri">https://doi.org/10.21436/inbor.38677490</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Els Lommelen, Anja Leyman, <a href="https://www.vlaanderen.be/inbo/en-gb" class="external-link"><img src="https://inbo.github.io/checklist/reference/figures/logo-en.png" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
